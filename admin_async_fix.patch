--- a/app/api/v1/endpoints/admin.py
+++ b/app/api/v1/endpoints/admin.py
@@ -455,7 +455,8 @@ async def list_users(
     )
     
     try:
-        query = db.query(User)
+        from sqlalchemy import select, or_
+        stmt = select(User)
         
         # Apply filters
         if status_filter:
@@ -479,8 +480,14 @@ async def list_users(
         users = query.offset(skip).limit(limit).all()
         
         # Count by status
-        active_count = db.query(User).filter(User.status == UserStatus.ACTIVE).count()
-        trading_count = db.query(User).filter(
+        active_count_result = await db.execute(
+            select(func.count()).select_from(User).filter(User.status == UserStatus.ACTIVE)
+        )
+        active_count = active_count_result.scalar()
+        
+        trading_count_result = await db.execute(
+            select(func.count()).select_from(User).filter(
             and_(
                 User.status == UserStatus.ACTIVE,
                 User.role.in_([UserRole.TRADER, UserRole.ADMIN])
             )
-        ).count()
+        ))
+        trading_count = trading_count_result.scalar()